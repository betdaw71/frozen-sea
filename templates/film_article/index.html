{%extends  'base.html'%}

{% block content %}

<style>
    /*!
     * chiefSlider (https://itchief.ru/lessons/php/feedback-form-for-website)
     * Copyright 2018 Alexander Maltsev
     * Licensed under MIT (https://github.com/itchief/feedback-form/blob/master/LICENSE)
     */

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      color: #fff;
      height: 3000px;
    }

    .slider {
      position: relative;
      /*overflow: hidden;*/
      overflow: hidden;
    }

    .slider__wrapper {
      display: flex;
      transition: transform 0.6s ease;
    }

    .slider__item {
      flex: 0 0 33.333333%;
      max-width: 33.333333%;
    }
    .slider__item1{
      flex: 0 0 33.333333%;
      max-width: 33.333333%;
    }
    .slider__control {
      position: absolute;
      top: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      width: 40px;
      color: #fff;
      text-align: center;
      opacity: 0.5;
      height: 50px;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, .5);
    }

    .slider__control_show {
      display: flex;
    }

    .slider__control:hover,
    .slider__control:focus {
      color: #fff;
      text-decoration: none;
      outline: 0;
      opacity: .9;
    }

    .slider__control_left {
      left: 0;
    }

    .slider__control_right {
      right: 0;
    }

    .slider__control::before {
      content: '';
      display: inline-block;
      width: 20px;
      height: 20px;
      background: transparent no-repeat center center;
      background-size: 100% 100%;
    }

    .slider__control_left::before {
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E");
    }

    .slider__control_right::before {
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E");
    }

    .slider__item>div {
      font-size: 15px;
      text-align: center;
      word-wrap: break-word;
    }
    .slider__item1>div {
      font-size: 15px;
      text-align: center;
      word-wrap: break-word;
    }
  </style>
<!-- 
  
{% for article in ganres %}
  
  {{article.title}}

{% endfor %} -->

<div class="row">
<div class="col-lg-12" style="background-color: #09172E;padding: 40px;">
    

    <h2 style="margin-bottom: 50px;">Кино новинки в HD</h2>

  <div class="slider">
    <div class="slider__wrapper">

      {% for i in stars %}
      <div class="slider__item" style="margin: 10px;max-width: 200px;">
        <div style="height: 300px; "><img src="{{i.article.img}}" width=100% height=100%></div><div><div class="secondary"><a href="{% url 'article' i.article.ganre.all.last.pk i.article.pk %}">{{i.article}}</a></div></div>
      </div>
      {% endfor %}
<!--       <div class="slider__item"style="margin: 10px;max-width: 200px;">
        <div style="height: 300px;"><img src="http://hdkino.vip/_bd/13/31781063.jpg" width=100% height=100%>2</div>
      </div> -->
<!--       <div class="slider__item"style="margin: 10px;max-width: 200px;">
        <div style="height: 300px; background: violet;"><img src="http://hdkino.vip/_bd/12/37266284.jpg" width=100% height=100%>3</div>
      </div>
      <div class="slider__item"style="margin: 10px;max-width: 200px;">
        <div style="height: 300px; background: coral;"><img src="http://hdkino.vip/_bd/15/87288967.jpg" width=100% height=100%>4</div>
      </div> -->
<!--       <div class="slider__item"style="margin: 10px;max-width: 200px;">
        <div style="height: 300px; background: brown;"><img src="http://hdkino.vip//_bd/14/85691136.jpg" width=100% height=100%>5</div>
      </div> -->
<!--       <div class="slider__item"style="margin: 10px;max-width: 200px;">
        <div style="height: 300px; background: orchid;"><img src="http://hdkino.vip//_bd/14/85691136.jpg" width=100% height=100%></div>
      </div> -->
<!--       <div class="slider__item"style="margin: 10px;max-width: 200px;">
        <div style="height: 300px; background: aqua;"><img src="http://hdkino.vip//_bd/14/85691136.jpg" width=100% height=100%>7</div>
      </div> -->
    </div>
    <a class="slider__control slider__control_left" href="#" role="button"></a>
    <a class="slider__control slider__control_right slider__control_show" href="#" role="button"></a>
  </div>
</div>
</div>



  <script>
    'use strict';
    var multiItemSlider = (function () {
      return function (selector, config) {
        var
          _mainElement = document.querySelector(selector), // основный элемент блока
          _sliderWrapper = _mainElement.querySelector('.slider__wrapper'), // обертка для .slider-item
          _sliderItems = _mainElement.querySelectorAll('.slider__item'), // элементы (.slider-item)
          _sliderControls = _mainElement.querySelectorAll('.slider__control'), // элементы управления
          _sliderControlLeft = _mainElement.querySelector('.slider__control_left'), // кнопка "LEFT"
          _sliderControlRight = _mainElement.querySelector('.slider__control_right'), // кнопка "RIGHT"
          _wrapperWidth = parseFloat(getComputedStyle(_sliderWrapper).width), // ширина обёртки
          _itemWidth = parseFloat(getComputedStyle(_sliderItems[0]).width), // ширина одного элемента    
          _positionLeftItem = 0, // позиция левого активного элемента
          _transform = 0, // значение транфсофрмации .slider_wrapper
          _step = _itemWidth / _wrapperWidth * 100, // величина шага (для трансформации)
          _items = []; // массив элементов
        // наполнение массива _items
        _sliderItems.forEach(function (item, index) {
          _items.push({ item: item, position: index, transform: 0 });
        });

        var position = {
          getMin: 0,
          getMax: _items.length - 1,
        }

        var _transformItem = function (direction) {
          if (direction === 'right') {
            if ((_positionLeftItem + _wrapperWidth / _itemWidth - 1) >= position.getMax) {
              return;
            }
            if (!_sliderControlLeft.classList.contains('slider__control_show')) {
              _sliderControlLeft.classList.add('slider__control_show');
            }
            if (_sliderControlRight.classList.contains('slider__control_show') && (_positionLeftItem + _wrapperWidth / _itemWidth) >= position.getMax) {
              _sliderControlRight.classList.remove('slider__control_show');
            }
            _positionLeftItem++;
            _transform -= _step;
          }
          if (direction === 'left') {
            if (_positionLeftItem <= position.getMin) {
              return;
            }
            if (!_sliderControlRight.classList.contains('slider__control_show')) {
              _sliderControlRight.classList.add('slider__control_show');
            }
            if (_sliderControlLeft.classList.contains('slider__control_show') && _positionLeftItem - 1 <= position.getMin) {
              _sliderControlLeft.classList.remove('slider__control_show');
            }
            _positionLeftItem--;
            _transform += _step;
          }
          _sliderWrapper.style.transform = 'translateX(' + _transform + '%)';
        }

        // обработчик события click для кнопок "назад" и "вперед"
        var _controlClick = function (e) {
          var direction = this.classList.contains('slider__control_right') ? 'right' : 'left';
          e.preventDefault();
          _transformItem(direction);
        };

        var _setUpListeners = function () {
          // добавление к кнопкам "назад" и "вперед" обрботчика _controlClick для событя click
          _sliderControls.forEach(function (item) {
            item.addEventListener('click', _controlClick);
          });
        }

        // инициализация
        _setUpListeners();

        return {
          right: function () { // метод right
            _transformItem('right');
          },
          left: function () { // метод left
            _transformItem('left');
          }
        }

      }
    }());

    var slider = multiItemSlider('.slider')

  </script>
  <div class="container">

      
      <div class="row">
      <div class="col-lg-12"><h2 style="margin: 10px;">Последние добавленные фильмы</h2></div>
        {% for i in films %}

          <div class="slider__item1" style="margin: 10px;max-width: 200px;height: auto; padding: 5px;"style="margin:0px;padding: 5px;display: flex;">
          <div style="height: 300px; "><img src="{{ i.img }}" width=100% height=100%></div><div><a href = 'films/{{i.ganre.all.last.pk}}/{{i.pk}}' style = 'color:white;text-decoration: none'>{{i.title}}</a><div class="secondary"></div></div>
          </div>

        {% endfor %}


        <div class="col-lg-12" style="margin:0px;padding: 0px;display: flex;">


   

</div>



      <div class="row"style="background-color: #09172E;padding-top: 400">
      <div class="col-lg-12"><h2 style="margin: 10px;">Последние добавленные сериалы</h2></div>
        {% for i in serials %}

          <div class="slider__item1" style="margin: 10px;max-width: 200px;height: auto; padding: 5px;"style="margin:0px;padding: 5px;display: flex;">
          <div style="height: 300px; "><img src="{{ i.img }}" width=100% height=100%></div><div><a href = 'films/{{i.ganre.all.last.pk}}/{{i.pk}}' style = 'color:white;text-decoration: none'>{{i.title}}</a><div class="secondary"></div></div>
          </div>

        {% endfor %}
</div>
</div></div>
{% endblock %}